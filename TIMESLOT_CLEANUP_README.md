# üóëÔ∏è Timeslot Cleanup Feature

## –û–ø–∏—Å–∞–Ω–∏–µ

–î–æ–±–∞–≤–ª–µ–Ω–∞ –Ω–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –≤ –ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–¥–∞–ª–µ–Ω–∏—è —Å—Ç–∞—Ä—ã—Ö —Ç–∞–π–º—Å–ª–æ—Ç–æ–≤ (—Å—Ç–∞—Ä—à–µ 1 –Ω–µ–¥–µ–ª–∏) –∏ –≤—Å–µ—Ö —Å–≤—è–∑–∞–Ω–Ω—ã—Ö —Å –Ω–∏–º–∏ –¥–∞–Ω–Ω—ã—Ö.

## üéØ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### –ß—Ç–æ —É–¥–∞–ª—è–µ—Ç—Å—è:
- **Timeslot** - —Ç–∞–π–º—Å–ª–æ—Ç—ã —Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π
- **Student_Choice** - –≤—ã–±–æ—Ä—ã —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –¥–ª—è —ç—Ç–∏—Ö —Ç–∞–π–º—Å–ª–æ—Ç–æ–≤
- **Student_Join** - –∑–∞–ø–∏—Å–∏ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –≤ –≥—Ä—É–ø–ø—ã (–µ—Å–ª–∏ Group_ID —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç Timeslot_ID)
- **Appointment** - –∑–∞–ø–∏—Å–∏ –Ω–∞ –∑–∞–Ω—è—Ç–∏—è –¥–ª—è —ç—Ç–∏—Ö —Ç–∞–π–º—Å–ª–æ—Ç–æ–≤
- **Tutor_Creates** - —Å–≤—è–∑–∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π —Å —Ç–∞–π–º—Å–ª–æ—Ç–∞–º–∏

### –ß—Ç–æ –ù–ï —É–¥–∞–ª—è–µ—Ç—Å—è:
- –¢–∞–π–º—Å–ª–æ—Ç—ã –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π
- –ë—É–¥—É—â–∏–µ —Ç–∞–π–º—Å–ª–æ—Ç—ã
- –î–∞–Ω–Ω—ã–µ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤, –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π –∏ –∫—É—Ä—Å–æ–≤
- –î—Ä—É–≥–∏–µ –∑–∞–ø–∏—Å–∏ –≤ —Å–∏—Å—Ç–µ–º–µ

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –î–æ—Å—Ç—É–ø –∫ —Ñ—É–Ω–∫—Ü–∏–∏
1. –í–æ–π–¥–∏—Ç–µ –≤ –ø–∞–Ω–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
2. –ù–∞ –≥–ª–∞–≤–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ dashboard –Ω–∞–π–¥–∏—Ç–µ –∫–Ω–æ–ø–∫—É **"Clean Old Timeslots"** –≤ —Å–µ–∫—Ü–∏–∏ Quick Actions
3. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∫–Ω–æ–ø–∫—É

### 2. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ
–°–∏—Å—Ç–µ–º–∞ –ø–æ–∫–∞–∂–µ—Ç –¥–∏–∞–ª–æ–≥ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π:
- –î–∞—Ç–∞ –æ—Ç—Å–µ—á–µ–Ω–∏—è (–Ω–µ–¥–µ–ª—é –Ω–∞–∑–∞–¥)
- –°–ø–∏—Å–æ–∫ —Ç–∏–ø–æ–≤ –¥–∞–Ω–Ω—ã—Ö, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç —É–¥–∞–ª–µ–Ω—ã
- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –Ω–µ–æ–±—Ä–∞—Ç–∏–º–æ—Å—Ç–∏ –¥–µ–π—Å—Ç–≤–∏—è

### 3. –†–µ–∑—É–ª—å—Ç–∞—Ç
–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –≤—ã —É–≤–∏–¥–∏—Ç–µ:
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π –∫–∞–∂–¥–æ–≥–æ —Ç–∏–ø–∞
- –ü—Ä–∏–º–µ—Ä—ã —É–¥–∞–ª–µ–Ω–Ω—ã—Ö —Ç–∞–π–º—Å–ª–æ—Ç–æ–≤
- –û–±–Ω–æ–≤–ª–µ–Ω–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –Ω–∞ dashboard

## üìÅ –§–∞–π–ª—ã

### Backend
- `backend/admin/delete_old_timeslots.php` - –æ—Å–Ω–æ–≤–Ω–æ–π API –¥–ª—è —É–¥–∞–ª–µ–Ω–∏—è
- `backend/admin/setup/add_old_timeslots.php` - —Å–∫—Ä–∏–ø—Ç –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### Frontend
- `frontend/admin/dashboard.html` - –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π dashboard —Å –Ω–æ–≤–æ–π –∫–Ω–æ–ø–∫–æ–π

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### API Endpoint
```
POST /CAE/backend/admin/delete_old_timeslots.php
```

### –û—Ç–≤–µ—Ç API
```json
{
  "success": true,
  "message": "Successfully deleted X old timeslots",
  "data": {
    "deleted_timeslots": 15,
    "deleted_student_choices": 8,
    "deleted_appointments": 5,
    "deleted_group_joins": 3,
    "deleted_tutor_creates": 15,
    "cutoff_date": "2024-01-15",
    "timeslots_details": [...]
  }
}
```

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –¢—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö
- –õ–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –≤ —Ç–∞–±–ª–∏—Ü—É `Admin_Log`
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
```bash
# –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∫:
http://localhost/CAE/backend/admin/setup/add_old_timeslots.php
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç —Å–æ–∑–¥–∞—Å—Ç:
- –°—Ç–∞—Ä—ã–µ —Ç–∞–π–º—Å–ª–æ—Ç—ã (2 –Ω–µ–¥–µ–ª–∏, 10 –¥–Ω–µ–π, 8 –¥–Ω–µ–π –Ω–∞–∑–∞–¥)
- –ù–æ–≤—ã–µ —Ç–∞–π–º—Å–ª–æ—Ç—ã (6 –¥–Ω–µ–π, 3 –¥–Ω—è, –≤—á–µ—Ä–∞, —Å–µ–≥–æ–¥–Ω—è, –∑–∞–≤—Ç—Ä–∞)
- –°–≤—è–∑–∞–Ω–Ω—ã–µ –∑–∞–ø–∏—Å–∏ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –∏ –ø—Ä–µ–ø–æ–¥–∞–≤–∞—Ç–µ–ª–µ–π

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ admin dashboard
3. –ù–∞–∂–º–∏—Ç–µ "Clean Old Timeslots"
4. –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç–µ —É–¥–∞–ª–µ–Ω–∏–µ
5. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —É–¥–∞–ª–∏–ª–∏—Å—å —Ç–æ–ª—å–∫–æ —Å—Ç–∞—Ä—ã–µ —Ç–∞–π–º—Å–ª–æ—Ç—ã

### 3. –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
- –£–¥–∞–ª—è—Ç—Å—è —Ç–∞–π–º—Å–ª–æ—Ç—ã —Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π
- –û—Å—Ç–∞–Ω—É—Ç—Å—è —Ç–∞–π–º—Å–ª–æ—Ç—ã –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π –∏ –±—É–¥—É—â–∏–µ
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –Ω–∞ dashboard –æ–±–Ω–æ–≤–∏—Ç—Å—è
- –í –ª–æ–≥–∞—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞ –ø–æ—è–≤–∏—Ç—Å—è –∑–∞–ø–∏—Å—å –æ –¥–µ–π—Å—Ç–≤–∏–∏

## üìä –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –≤ —Ç–∞–±–ª–∏—Ü—É `Admin_Log`:
- **Action**: "Delete Old Timeslots"
- **Details**: –ü–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
- **IP_Address**: IP –∞–¥—Ä–µ—Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- **Created_At**: –í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–µ–π—Å—Ç–≤–∏—è

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–ù–µ–æ–±—Ä–∞—Ç–∏–º–æ—Å—Ç—å**: –£–¥–∞–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
2. **–í–ª–∏—è–Ω–∏–µ –Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É**: –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–≤–ª–∏—è–µ—Ç –Ω–∞ –æ–±—â—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É —Å–∏—Å—Ç–µ–º—ã
3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ü—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Å—Ç–∞—Ä—ã—Ö –∑–∞–ø–∏—Å–µ–π –æ–ø–µ—Ä–∞—Ü–∏—è –º–æ–∂–µ—Ç –∑–∞–Ω—è—Ç—å –≤—Ä–µ–º—è
4. **–†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ**: –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–µ–ª–∞—Ç—å –±—ç–∫–∞–ø –ø–µ—Ä–µ–¥ –º–∞—Å—Å–æ–≤—ã–º —É–¥–∞–ª–µ–Ω–∏–µ–º

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è

–î–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å cron job:
```bash
# –ö–∞–∂–¥–æ–µ –≤–æ—Å–∫—Ä–µ—Å–µ–Ω—å–µ –≤ 2:00 —É—Ç—Ä–∞
0 2 * * 0 curl -X POST http://localhost/CAE/backend/admin/delete_old_timeslots.php
```

## üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∞ "Method not allowed"
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è POST –∑–∞–ø—Ä–æ—Å

### –û—à–∏–±–∫–∞ "Unauthorized"
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Å–µ—Å—Å–∏—è –∞–∫—Ç–∏–≤–Ω–∞

### –û—à–∏–±–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Ç–∞–±–ª–∏—Ü—ã —Å—É—â–µ—Å—Ç–≤—É—é—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

### –ù–µ—Ç —É–¥–∞–ª–µ–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, –µ—Å—Ç—å –ª–∏ —Ç–∞–π–º—Å–ª–æ—Ç—ã —Å—Ç–∞—Ä—à–µ 7 –¥–Ω–µ–π
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–∞—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞
